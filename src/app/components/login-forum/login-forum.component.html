<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<div *ngIf="!authService.getToken()">
  <body>
  <div class="container">
    <div class="auth-container">
      <div class="auth-toggle">
        <button (click)="showLogin()" [class.active]="isLogin">Login</button>
        <button (click)="showSignUp()" [class.active]="!isLogin">Sign Up</button>
      </div>

      <div class="form-container">
        <form *ngIf="isLogin" @fadeIn>
          <h2>Login</h2>
          <input type="text" name="username" [(ngModel)]="loginDTO.username" placeholder="Username" required />
          <input type="password" name="password" [(ngModel)]="loginDTO.password" placeholder="Password" required />
          <button type="submit" (click)="loginRequest()">Login</button>
          <div class="social-login">
            <button class="google" (click)="loginWithGoogle()">
              <i class="fab fa-google"></i> Google
            </button>
            <button class="facebook" (click)="loginWithFacebook()">
              <i class="fab fa-facebook-f"></i> Facebook
            </button>
            <button class="github" (click)="loginWithGithub()">
              <i class="fab fa-github"></i> GitHub
            </button>
          </div>
        </form>

        <form *ngIf="!isLogin" @fadeIn>
          <h2>Sign Up</h2>
          <input type="text" placeholder="Username" name="username" required [(ngModel)]="signUpDTO.username" />
          <input type="email" placeholder="Email" name="email" required [(ngModel)]="signUpDTO.email" />
          <input type="password" placeholder="Password" name="password" required [(ngModel)]="signUpDTO.password" />
          <input type="password" placeholder="Confirm Password" name="confirmPassword" required [(ngModel)]="signUpDTO.confirmPassword" />
          <button type="submit" (click)="signUpRequest()">Sign Up</button>
        </form>
      </div>
    </div>
  </div>
  </body>
</div>

<div *ngIf="authService.getToken()">
  <button (click)="signOut()">Sign Out</button>
  <body>
  <div class="forum-container">
    <h1>Welcome to the Forum</h1>
    <div class="post-section">
      <textarea placeholder="Write your post here..." [(ngModel)]="newPostContent"></textarea>
      <button (click)="createPost()">Post</button>
    </div>

    <div class="posts-list">
      <div class="post" *ngFor="let post of posts">
        <h3>{{ post.username }}</h3>
        <p>{{ post.content }}</p>
        <div class="actions">
          <button (click)="likePost(post.id)">‚ù§Ô∏è {{ post.likes }}</button>
          <button (click)="showCommentSection(post.id)">üí¨ Comment</button>
        </div>
        <div *ngIf="post.showComments">
          <textarea placeholder="Write a comment..." [(ngModel)]="post.newComment"></textarea>
          <button (click)="addComment(post.id)">Add Comment</button>
          <div *ngFor="let comment of post.comments">
            <p>{{ comment }}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
  </body>
</div>
</html>
